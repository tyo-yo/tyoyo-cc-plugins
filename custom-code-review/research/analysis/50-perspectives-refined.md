# 50観点の精査とグルーピング（改訂版）

作成日: 2026-02-10
目的: 50観点すべてを統合・整理し、各観点の適用基準を明確化

---

## 📋 エグゼクティブサマリー

- **総観点数**: 50
- **カテゴリ数**: 10（再編成）
- **Tier 1（必須）**: 10観点
- **Tier 2（推奨）**: 15観点
- **Tier 3（オプション）**: 25観点

---

## 🎯 観点カテゴリ（10カテゴリ）

| # | カテゴリ | 観点数 | 優先度 | 説明 |
|---|---------|-------|--------|------|
| 1 | **プロジェクト標準** | 3 | 高 | プロジェクト固有のルールと一貫性 |
| 2 | **正確性（基本）** | 5 | 最高 | バグ、機能要件 |
| 3 | **セキュリティ（基本）** | 4 | 最高 | 基本的なセキュリティ脆弱性 |
| 4 | **セキュリティ（高度）** | 6 | 高 | 高度なセキュリティ分析 |
| 5 | **テストとエラー処理** | 6 | 最高 | テスト品質、エラーハンドリング |
| 6 | **品質と保守性** | 8 | 高 | 読みやすさ、複雑性、保守性 |
| 7 | **設計とアーキテクチャ** | 6 | 中〜高 | 型設計、アーキテクチャパターン |
| 8 | **ドキュメント** | 2 | 中 | コメント品質、ドキュメント精度 |
| 9 | **パフォーマンス** | 3 | 中 | パフォーマンス、リソース管理 |
| 10 | **コンテキスト分析** | 7 | 中〜高 | Git履歴、ワークフロー、コードベース理解 |

**合計**: 50観点

---

## 📊 完全な50観点リスト

### 1. プロジェクト標準（3観点）

#### 1.1 CLAUDE.md準拠
- **ID**: `P01-CLAUDE_MD`
- **優先度**: Tier 1（必須）
- **信頼度基準**: 91-100点（明示的違反）
- **適用基準**:
  - ✅ 常に適用
  - プロジェクトルートに`CLAUDE.md`が存在する場合
- **使用シナリオ**:
  - すべてのPR（規模問わず）
  - プロジェクト標準の強制
- **ソース**: PR Review Toolkit, Feature Dev, Code Review

#### 1.2 コーディング規約の一貫性
- **ID**: `P02-CODING_CONVENTION`
- **優先度**: Tier 1（必須）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ 常に適用
  - 既存コードベースとの一貫性チェック
- **使用シナリオ**:
  - すべてのPR
  - 特に新規ファイル追加時
- **ソース**: code-simplifier, matsengrp

#### 1.3 既存パターンとの整合性
- **ID**: `P03-PATTERN_ALIGNMENT`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ 新機能追加
  - ✅ アーキテクチャ変更
  - ❌ 単純なバグ修正
  - ❌ ドキュメント変更のみ
- **使用シナリオ**:
  - 新しいコンポーネント追加
  - 既存機能の大規模リファクタリング
- **ソース**: Feature Dev

---

### 2. 正確性（基本）（5観点）

#### 2.1 バグ検出
- **ID**: `C01-BUG_DETECTION`
- **優先度**: Tier 1（必須）
- **信頼度基準**: 91-100点（必ず発生）、80-90点（高確率）
- **適用基準**:
  - ✅ 常に適用
  - すべてのコード変更
- **使用シナリオ**:
  - すべてのPR
  - ロジックエラー、実行時エラーの検出
- **ソース**: すべての公式プラグイン

#### 2.2 機能要件の適合性
- **ID**: `C02-FUNCTIONAL_COMPLIANCE`
- **優先度**: Tier 1（必須）
- **信頼度基準**: 91-100点
- **適用基準**:
  - ✅ 新機能追加
  - ✅ 機能変更
  - ❌ リファクタリングのみ（機能変更なし）
  - ❌ ドキュメント変更のみ
- **使用シナリオ**:
  - 新機能実装PR
  - バグ修正PR（要件を満たしているか）
- **ソース**: 新規観点

#### 2.3 エッジケースとバウンダリー条件
- **ID**: `C03-EDGE_CASES`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ ユーザー入力処理
  - ✅ データ変換処理
  - ✅ 境界値処理
  - ❌ 単純なGetter/Setter
- **使用シナリオ**:
  - API入力検証
  - ファイル処理
  - 数値計算
- **2026年トレンド**: AIコードのハッピーパス偏重に対する対策
- **ソース**: pr-test-analyzer（間接的）

#### 2.4 サイレントフェイラー
- **ID**: `C04-SILENT_FAILURES`
- **優先度**: Tier 1（必須）
- **信頼度基準**: 91-100点
- **適用基準**:
  - ✅ エラーハンドリング追加・変更
  - ✅ Try-catchブロックを含む
  - ✅ ログ処理変更
  - ❌ エラーハンドリング無関係
- **使用シナリオ**:
  - すべてのPR（特にAI生成コード）
  - エラー処理実装PR
- **2026年トレンド**: AI生成コードで特に多い問題
- **ソース**: PR Review Toolkit (silent-failure-hunter)

#### 2.5 例外安全性
- **ID**: `C05-EXCEPTION_SAFETY`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ リソース管理コード
  - ✅ トランザクション処理
  - ✅ ファイル/DB操作
  - ❌ シンプルな関数
- **使用シナリオ**:
  - リソースリーク防止
  - トランザクション整合性
- **ソース**: 新規観点

---

### 3. セキュリティ（基本）（4観点）

#### 3.1 セキュリティ脆弱性（基本）
- **ID**: `S01-BASIC_VULNERABILITIES`
- **優先度**: Tier 1（必須）
- **信頼度基準**: 91-100点（明確）、80-90点（潜在的）
- **適用基準**:
  - ✅ 常に適用
  - 特に外部入力処理、認証・認可、データ保存
- **使用シナリオ**:
  - すべてのPR
  - XSS、SQLインジェクション、コマンドインジェクション検出
- **ソース**: PR Review Toolkit, anilcancakir

#### 3.2 一般的な脆弱性パターン
- **ID**: `S02-COMMON_PATTERNS`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ セキュリティ関連コード
  - ✅ 認証・認可ロジック
  - ✅ 外部API呼び出し
- **使用シナリオ**:
  - Trail of Bitsの10種類の脆弱性パターンチェック
- **ソース**: trailofbits/skills (vulnerability-patterns)

#### 3.3 False Positiveフィルタリング
- **ID**: `S03-FALSE_POSITIVE_FILTER`
- **優先度**: Tier 1（必須）
- **信頼度基準**: 80以上のみ報告
- **適用基準**:
  - ✅ セキュリティスキャン後の検証
  - すべてのセキュリティエージェントの後処理
- **使用シナリオ**:
  - セキュリティレビュー結果のフィルタリング
  - Reactフレームワーク、ORM、環境変数の安全パターン除外
- **ソース**: Piebald-AI (security-review)

#### 3.4 先例ベースの評価
- **ID**: `S04-PRECEDENT_BASED`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ 既存の安全パターンが存在する場合
  - フレームワーク標準機能使用時
- **使用シナリオ**:
  - React.createElement、Angular sanitizer等の検出
  - 誤検知削減
- **ソース**: Piebald-AI (security-review)

---

### 4. セキュリティ（高度）（6観点）

#### 4.1 アダプティブレビュー深度
- **ID**: `S05-ADAPTIVE_DEPTH`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: コードベースサイズに応じた適応
- **適用基準**:
  - ✅ セキュリティレビュー時
  - コードベースサイズで戦略変更（SMALL/MEDIUM/LARGE）
- **使用シナリオ**:
  - SMALL (<20ファイル): DEEP - 全依存関係、完全git blame
  - MEDIUM (20-200): FOCUSED - 1ホップ依存
  - LARGE (200+): SURGICAL - クリティカルパスのみ
- **ソース**: trailofbits/skills (differential-review) ⭐⭐⭐⭐⭐

#### 4.2 攻撃者モデリング
- **ID**: `S06-ATTACKER_MODELING`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 85-100点（HIGH RISKの場合のみ適用）
- **適用基準**:
  - ✅ HIGH RISKのセキュリティ問題のみ
  - ❌ LOW/MEDIUM RISK
- **使用シナリオ**:
  - WHO/WHAT/WHERE分析
  - 悪用可能性評価（EASY/MEDIUM/HARD）
- **ソース**: trailofbits/skills (differential-review) ⭐⭐⭐⭐⭐

#### 4.3 セキュリティリグレッション
- **ID**: `S07-SECURITY_REGRESSION`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 91-100点
- **適用基準**:
  - ✅ セキュリティ関連コード変更
  - ✅ 過去にCVE修正があるファイル
  - ❌ 新規ファイルのみ
- **使用シナリオ**:
  - Git履歴で"security", "CVE", "fix"を含むコミットから削除されたコードの検出
- **ソース**: trailofbits/skills (differential-review) ⭐⭐⭐⭐⭐

#### 4.4 ブラストラジアス（影響範囲）分析
- **ID**: `S08-BLAST_RADIUS`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ 共通関数・ユーティリティ変更
  - ✅ MEDIUM以上のリスク
  - ❌ 単一箇所のみの使用
- **使用シナリオ**:
  - 優先度 = リスク × 呼び出し元数
  - HIGH risk × 50 callers = TOP PRIORITY
- **ソース**: trailofbits/skills (differential-review) ⭐⭐⭐⭐

#### 4.5 ベースラインコンテキスト構築
- **ID**: `S09-BASELINE_CONTEXT`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 前処理（スコアリングなし）
- **適用基準**:
  - ✅ 初回レビュー時
  - ✅ 大規模セキュリティレビュー
  - ❌ 小規模修正
- **使用シナリオ**:
  - システム不変条件、信頼境界、コールグラフ構築
  - 他のセキュリティエージェントの前提知識
- **ソース**: trailofbits/skills (differential-review)

#### 4.6 レッドフラグエスカレーション
- **ID**: `S10-RED_FLAG_ESCALATION`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 100点（即座エスカレーション）
- **適用基準**:
  - ✅ セキュリティコミットからのコード削除
  - ✅ アクセス制御修飾子の削除
  - ✅ 検証削除（置換なし）
  - ✅ 高ブラストラジアス + HIGH risk
- **使用シナリオ**:
  - 即座にレビューをストップして報告
  - 他のチェックをスキップ
- **ソース**: trailofbits/skills (differential-review) ⭐⭐⭐⭐⭐

---

### 5. テストとエラー処理（6観点）

#### 5.1 テストカバレッジ
- **ID**: `T01-TEST_COVERAGE`
- **優先度**: Tier 1（必須）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ 新規機能追加
  - ✅ ロジック変更
  - ❌ ドキュメント変更のみ
  - ❌ UIスタイル変更のみ
- **使用シナリオ**:
  - 振る舞いベースのテスト品質評価（行カバレッジではない）
  - エラーパス、境界値、負のテストケース
- **ソース**: PR Review Toolkit (pr-test-analyzer), matsengrp

#### 5.2 テストの質
- **ID**: `T02-TEST_QUALITY`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ テストコード変更
  - ❌ テスト無関係
- **使用シナリオ**:
  - テストの独立性、決定性、AAA（Arrange-Act-Assert）
  - リファクタリング耐性
- **ソース**: PR Review Toolkit (pr-test-analyzer)

#### 5.3 エラーハンドリング品質
- **ID**: `T03-ERROR_HANDLING_QUALITY`
- **優先度**: Tier 1（必須）
- **信頼度基準**: 91-100点
- **適用基準**:
  - ✅ エラーハンドリング追加・変更
  - ❌ エラーハンドリング無関係
- **使用シナリオ**:
  - 適切なログレベル、コンテキスト情報、ユーザーフィードバック
  - キャッチの特異性
- **ソース**: PR Review Toolkit (silent-failure-hunter)

#### 5.4 TDD原則の遵守
- **ID**: `T04-TDD_PRINCIPLES`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ TDDプロジェクトのみ
  - Red-Green-Refactorサイクルの強制
  - ❌ TDD不採用プロジェクト
- **使用シナリオ**:
  - TDDワークフローの強制
  - テスト先行開発の確認
- **ソース**: nizos/tdd-guard ⭐⭐⭐⭐

#### 5.5 リグレッションテスト
- **ID**: `T05-REGRESSION_TESTS`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ バグ修正PR
  - ✅ 過去にバグがあった箇所
  - ❌ 新規機能のみ
- **使用シナリオ**:
  - バグ修正に対応するリグレッションテストの存在確認
- **ソース**: levnikolaevich

#### 5.6 E2Eテスト計画
- **ID**: `T06-E2E_TEST_PLAN`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ ユーザーフロー変更
  - ✅ 統合機能追加
  - ❌ 内部ロジックのみ
- **使用シナリオ**:
  - E2Eテストの必要性と計画の評価
- **ソース**: levnikolaevich

---

### 6. 品質と保守性（8観点）

#### 6.1 読みやすさ
- **ID**: `Q01-READABILITY`
- **優先度**: Tier 1（必須）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ 常に適用
  - すべてのコード変更
- **使用シナリオ**:
  - 変数名、関数分割、ネスト深度、マジックナンバー
- **ソース**: code-simplifier, matsengrp

#### 6.2 複雑性
- **ID**: `Q02-COMPLEXITY`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ 複雑なロジック
  - ✅ 長い関数（50行以上）
  - ❌ シンプルな関数
- **使用シナリオ**:
  - 循環的複雑度、認知的複雑度の評価
- **ソース**: code-simplifier

#### 6.3 コード臭
- **ID**: `Q03-CODE_SMELLS`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ 新規実装
  - ✅ リファクタリング候補
  - ❌ 小規模修正
- **使用シナリオ**:
  - 重複コード、長いメソッド、データの群れ、Switch文の乱用
- **ソース**: matsengrp (code-smell-detector)

#### 6.4 アンチパターン
- **ID**: `Q04-ANTIPATTERNS`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ アーキテクチャ変更
  - ✅ 大規模実装
  - ❌ 小規模修正
- **使用シナリオ**:
  - God Object、Spaghetti Code、Lava Flow、Cargo Cult
- **ソース**: matsengrp (antipattern-scanner)

#### 6.5 保守性
- **ID**: `Q05-MAINTAINABILITY`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ 常に適用
  - 長期保守性の観点
- **使用シナリオ**:
  - ハードコード値、密結合、低凝集度、テスト性
- **ソース**: code-simplifier

#### 6.6 クリーンコード原則
- **ID**: `Q06-CLEAN_CODE`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ クリーンコード重視プロジェクト
  - ❌ プロトタイプ開発
- **使用シナリオ**:
  - SOLID原則、DRY、YAGNI、KISS
- **ソース**: matsengrp (clean-code-reviewer)

#### 6.7 YAGNIチェック
- **ID**: `Q07-YAGNI_CHECK`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ 新規機能追加
  - ✅ 拡張性実装
  - ❌ 明確な要件に基づく実装
- **使用シナリオ**:
  - grepで実際の使用を確認
  - 使われていない機能は削除提案
- **ソース**: obra/superpowers (receiving-code-review) ⭐⭐⭐⭐

#### 6.8 技術的厳密性
- **ID**: `Q08-TECHNICAL_RIGOR`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ コードレビューフィードバック受信時
  - レビューコメントの検証
- **使用シナリオ**:
  - "Thank you"禁止、形だけの同意を避ける
  - レビューフィードバックをコードベースと照合
- **ソース**: obra/superpowers (receiving-code-review) ⭐⭐⭐⭐

---

### 7. 設計とアーキテクチャ（6観点）

#### 7.1 型設計とカプセル化
- **ID**: `D01-TYPE_DESIGN`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ 新しい型・クラス追加
  - ✅ 型安全言語（TypeScript、Java、C#、Rust、Go）
  - ❌ 動的型付け言語のみ
- **使用シナリオ**:
  - 不変性、カプセル化評価（1-10スコア）
- **ソース**: PR Review Toolkit (type-design-analyzer)

#### 7.2 アーキテクチャパターン準拠
- **ID**: `D02-ARCHITECTURE_PATTERNS`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ アーキテクチャ変更
  - ✅ 新規コンポーネント追加
  - ❌ 既存コンポーネント内の小規模変更
- **使用シナリオ**:
  - レイヤー構造、デザインパターン、依存関係の方向性
- **ソース**: Feature Dev (code-architect), matsengrp

#### 7.3 API設計
- **ID**: `D03-API_DESIGN`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ API追加・変更
  - ❌ 内部実装のみ
- **使用シナリオ**:
  - RESTful原則、エンドポイント命名、後方互換性
- **ソース**: 新規観点

#### 7.4 依存関係管理
- **ID**: `D04-DEPENDENCY_MANAGEMENT`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ 依存関係追加・変更
  - ✅ ライブラリアップグレード
  - ❌ 依存関係無関係
- **使用シナリオ**:
  - 循環依存、セキュリティ脆弱性のある依存関係
- **ソース**: Feature Dev (code-explorer)

#### 7.5 データフロー設計
- **ID**: `D05-DATA_FLOW`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ データ変換ロジック
  - ✅ 状態管理変更
  - ❌ 単純なGetter/Setter
- **使用シナリオ**:
  - データ変換の明確性、副作用の明示性
- **ソース**: Feature Dev (code-explorer, code-architect)

#### 7.6 修正の検証（Fix Review）
- **ID**: `D06-FIX_REVIEW`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ バグ修正PR
  - ❌ 新機能PR
- **使用シナリオ**:
  - 修正が根本原因に対処しているか
  - 新たな問題を生んでいないか
- **ソース**: trailofbits/skills (fix-review)

---

### 8. ドキュメント（2観点）

#### 8.1 コメント品質と精度
- **ID**: `DOC01-COMMENT_QUALITY`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 91-100点（不正確）、80-90点（誤解招く）
- **適用基準**:
  - ✅ コメント追加・変更
  - ❌ コメント無関係
- **使用シナリオ**:
  - 事実検証、完全性評価、長期価値評価
- **ソース**: PR Review Toolkit (comment-analyzer)

#### 8.2 ドキュメント整合性
- **ID**: `DOC02-DOCUMENTATION_CONSISTENCY`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ APIドキュメント変更
  - ✅ README更新
  - ❌ 内部実装のみ
- **使用シナリオ**:
  - README、仕様書、APIドキュメントとの一致
- **ソース**: anilcancakir (my_docs)

---

### 9. パフォーマンス（3観点）

#### 9.1 パフォーマンス
- **ID**: `PERF01-PERFORMANCE`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 85-100点（明らか）、70-84点（潜在的）
- **適用基準**:
  - ✅ パフォーマンスクリティカルなパス
  - ✅ ループ、データベースクエリ
  - ❌ 非クリティカルパス
- **使用シナリオ**:
  - N+1問題、無限ループ、不要なネットワークリクエスト
- **2026年トレンド**: 理論的最適化ではなく、実際のリスク対象
- **ソース**: 一般的なcode-reviewer

#### 9.2 アクセシビリティ
- **ID**: `PERF02-ACCESSIBILITY`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ UI/Web開発のみ
  - ❌ バックエンド/API
- **使用シナリオ**:
  - WCAG準拠、ARIA属性、キーボードナビゲーション
- **2026年トレンド**: ネイティブHTML要素の活用推奨
- **ソース**: 新規観点

#### 9.3 リソース管理
- **ID**: `PERF03-RESOURCE_MANAGEMENT`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 91-100点（確実）、80-90点（潜在的）
- **適用基準**:
  - ✅ ファイル/DB操作
  - ✅ タイマー、イベントリスナー
  - ❌ リソース無関係
- **使用シナリオ**:
  - ファイルハンドル、DB接続のクローズ、メモリリーク防止
- **ソース**: 一般的なcode-reviewer

---

### 10. コンテキスト分析（7観点）

#### 10.1 Git履歴分析
- **ID**: `CTX01-GIT_HISTORY`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ 変更頻度の高いファイル
  - ✅ 過去にバグが多い箇所
  - ❌ 新規ファイルのみ
- **使用シナリオ**:
  - 同じ箇所での繰り返しバグ、リファクタリング後の不整合
- **ソース**: Code Review (履歴分析エージェント)

#### 10.2 コードベース理解
- **ID**: `CTX02-CODEBASE_UNDERSTANDING`
- **優先度**: Tier 2（推奨）
- **信頼度基準**: 85-100点
- **適用基準**:
  - ✅ 既存機能変更
  - ✅ 統合コード
  - ❌ 完全に独立した新機能
- **使用シナリオ**:
  - 実行フロー、依存関係、アーキテクチャレイヤー理解
- **ソース**: Feature Dev (code-explorer)

#### 10.3 プランとの整合性
- **ID**: `CTX03-PLAN_ALIGNMENT`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 80-100点
- **適用基準**:
  - ✅ Plan Modeを使用した開発
  - ❌ Plan未使用
- **使用シナリオ**:
  - 実装がPlanに記載された内容と一致しているか
- **ソース**: obra/superpowers

#### 10.4 レビュータイミング遵守
- **ID**: `CTX04-REVIEW_TIMING`
- **優先度**: Tier 3（オプション）
- **信頼度基準**: 前提条件チェック
- **適用基準**:
  - ✅ レビュープロセス定義プロジェクト
  - ❌ レビュープロセス未定義
- **使用シナリオ**:
  - タスク完了後、機能完成後、マージ前のタイミング確認
- **ソース**: obra/superpowers (receiving-code-review)

#### 10.5 サブタスク並列化
- **ID**: `CTX05-SUBTASK_PARALLEL`
- **優先度**: Tier 3（オプション、メタ観点）
- **信頼度基準**: プロセス最適化
- **適用基準**:
  - ✅ 複数の検証タスク
  - エージェント実行の最適化
- **使用シナリオ**:
  - 検出と検証を分離、並列実行で高速化
- **ソース**: Piebald-AI (security-review) ⭐⭐⭐⭐

#### 10.6 エージェントレビュー（複数モデル）
- **ID**: `CTX06-MULTI_MODEL_REVIEW`
- **優先度**: Tier 3（オプション、メタ観点）
- **信頼度基準**: アンサンブル評価
- **適用基準**:
  - ✅ 重要なPR
  - ✅ 高リスク変更
  - ❌ 軽微な変更
- **使用シナリオ**:
  - 複数モデル（Claude、Gemini、Codex）で並列レビュー
  - 結果の統合と信頼度向上
- **ソース**: levnikolaevich

#### 10.7 品質ゲートとスコアリング
- **ID**: `CTX07-QUALITY_GATE`
- **優先度**: Tier 3（オプション、メタ観点）
- **信頼度基準**: 総合評価
- **適用基準**:
  - ✅ マージ前のゲートチェック
  - PR全体の品質スコア算出
- **使用シナリオ**:
  - すべてのエージェント結果を統合
  - マージ可否の判定
- **ソース**: levnikolaevich

---

## 🎯 統合と重複の分析

### 重複・統合可能な観点

#### 統合候補1: セキュリティ脆弱性
- **現状**:
  - `S01-BASIC_VULNERABILITIES`（基本）
  - `S02-COMMON_PATTERNS`（一般的パターン）
- **提案**: 1つのエージェントに統合可能
- **理由**: 両方とも基本的な脆弱性検出で、フェーズが同じ

#### 統合候補2: テストカバレッジとテストの質
- **現状**:
  - `T01-TEST_COVERAGE`
  - `T02-TEST_QUALITY`
- **提案**: 統合して単一エージェントで両方チェック
- **理由**: どちらもテストコードを対象とし、同時に評価可能

#### 統合候補3: 読みやすさと複雑性
- **現状**:
  - `Q01-READABILITY`
  - `Q02-COMPLEXITY`
- **提案**: 統合可能（1エージェント）
- **理由**: 複雑性は読みやすさの一部として評価可能

### 明確に分離すべき観点

#### 分離維持1: False Positiveフィルタリング
- **理由**: すべてのセキュリティエージェントの**後処理**として独立実行
- **独立性**: 他の観点とは異なるフェーズ

#### 分離維持2: アダプティブレビュー深度
- **理由**: **前処理**（プリアナリシス）として戦略決定
- **独立性**: レビュー戦略の選択（メタ観点）

#### 分離維持3: レッドフラグエスカレーション
- **理由**: 即座エスカレーションで**他のチェックをスキップ**
- **独立性**: 最優先チェック

---

## 📋 推奨エージェント構成（20→18エージェントに最適化）

### Tier 1: 必須（7エージェント）

| # | エージェント名 | 観点ID | 観点数 | モデル |
|---|--------------|--------|--------|--------|
| 1 | **guideline-enforcer** | P01, P02 | 2 | Sonnet |
| 2 | **bug-hunter** | C01, C02 | 2 | Opus |
| 3 | **security-guardian-basic** | S01, S02 | 2 | Opus |
| 4 | **silent-failure-detector** | C04, T03 | 2 | Sonnet |
| 5 | **test-coverage-checker** | T01, T02 | 2 | Sonnet |
| 6 | **readability-enhancer** | Q01, Q02 | 2 | Haiku |
| 7 | **false-positive-filter** | S03, S04 | 2 | Haiku |

### Tier 2: 推奨（8エージェント）

| # | エージェント名 | 観点ID | 観点数 | モデル |
|---|--------------|--------|--------|--------|
| 8 | **security-guardian-advanced** | S05, S06 | 2 | Opus |
| 9 | **security-regression-hunter** | S07, S10 | 2 | Sonnet |
| 10 | **edge-case-validator** | C03, C05 | 2 | Sonnet |
| 11 | **architecture-analyst** | P03, D02 | 2 | Sonnet |
| 12 | **code-quality-analyzer** | Q03, Q04, Q05 | 3 | Haiku |
| 13 | **type-design-reviewer** | D01, D04 | 2 | Sonnet |
| 14 | **comment-accuracy-checker** | DOC01 | 1 | Haiku |
| 15 | **git-history-analyzer** | CTX01, CTX02 | 2 | Haiku |

### Tier 3: オプション（3エージェント）

| # | エージェント名 | 観点ID | 観点数 | モデル |
|---|--------------|--------|--------|--------|
| 16 | **blast-radius-analyzer** | S08 | 1 | Haiku |
| 17 | **yagni-enforcer** | Q06, Q07 | 2 | Haiku |
| 18 | **resource-auditor** | PERF01, PERF03 | 2 | Haiku |

### メタエージェント（実行制御）

| # | エージェント名 | 観点ID | 説明 |
|---|--------------|--------|------|
| M1 | **adaptive-strategy-selector** | S05 | コードベースサイズで戦略決定（前処理） |
| M2 | **red-flag-monitor** | S10 | 即座エスカレーション検出（最優先） |
| M3 | **quality-gate-scorer** | CTX07 | 全結果統合と判定（後処理） |

---

## 🔧 適用基準マトリクス

### PRタイプ別の推奨エージェント

| PRタイプ | Tier 1 | Tier 2 | Tier 3 | 推定時間 |
|---------|--------|--------|--------|----------|
| **新機能追加** | ✅ 全7 | ✅ 全8 | ✅ 3つ推奨 | 5-7分 |
| **バグ修正** | ✅ 全7 | ✅ 5つ | ⚠️ 不要 | 3-4分 |
| **リファクタリング** | ✅ 5つ | ✅ 6つ | ✅ yagni-enforcer | 4-5分 |
| **セキュリティ修正** | ✅ 全7 | ✅ 全8 | ✅ blast-radius | 6-8分 |
| **ドキュメント変更** | ⚠️ 2つ | ⚠️ 1つ | ⚠️ 不要 | 1-2分 |
| **UI/スタイル変更** | ⚠️ 3つ | ⚠️ 2つ | ⚠️ 不要 | 2-3分 |
| **テスト追加** | ⚠️ 3つ | ✅ 3つ | ⚠️ 不要 | 2-3分 |

### ファイルタイプ別の推奨エージェント

| ファイルタイプ | 必須 | 推奨 | 不要 |
|--------------|------|------|------|
| **認証・認可** | security-guardian-basic/advanced, security-regression | bug-hunter, edge-case-validator | yagni-enforcer |
| **API エンドポイント** | bug-hunter, security-guardian-basic, test-coverage | edge-case-validator, architecture-analyst | comment-accuracy |
| **データベース** | bug-hunter, security-guardian-basic, resource-auditor | edge-case-validator | - |
| **UI コンポーネント** | readability-enhancer, test-coverage | architecture-analyst | security-guardian-advanced |
| **ユーティリティ関数** | bug-hunter, edge-case-validator, test-coverage | yagni-enforcer | security-guardian-advanced |
| **設定ファイル** | guideline-enforcer | comment-accuracy | test-coverage |

---

## 📝 次のステップ: 実装計画

### Phase 1: 基盤（7 Tier 1エージェント）
1. guideline-enforcer
2. bug-hunter
3. security-guardian-basic
4. silent-failure-detector
5. test-coverage-checker
6. readability-enhancer
7. false-positive-filter

### Phase 2: 高度なセキュリティ（2エージェント）
8. security-guardian-advanced
9. security-regression-hunter

### Phase 3: 品質拡張（6エージェント）
10. edge-case-validator
11. architecture-analyst
12. code-quality-analyzer
13. type-design-reviewer
14. comment-accuracy-checker
15. git-history-analyzer

### Phase 4: オプション機能（3エージェント）
16. blast-radius-analyzer
17. yagni-enforcer
18. resource-auditor

---

## 🎓 各観点の学習優先度

### 最優先学習（⭐⭐⭐⭐⭐）
1. アダプティブレビュー深度（S05）
2. 攻撃者モデリング（S06）
3. セキュリティリグレッション（S07）
4. レッドフラグエスカレーション（S10）
5. サイレントフェイラー（C04）

### 高優先学習（⭐⭐⭐⭐）
6. False Positiveフィルタリング（S03）
7. ブラストラジアス分析（S08）
8. YAGNIチェック（Q07）
9. エッジケース（C03）
10. 技術的厳密性（Q08）

---

**作成日**: 2026-02-10
**バージョン**: 2.0（精査・グルーピング版）
**次の作業**: Phase 1エージェントテンプレート作成
