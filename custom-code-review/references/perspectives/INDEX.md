# コードレビュー観点インデックス（AI向け）

**総観点数**: 39
**最終更新**: 2026-02-11

---

## P01: AIエージェント向け指示の遵守

**チェック内容**: CLAUDE.mdやREADME.mdの指示との整合性を検証。プロジェクト固有の命名規則、設計パターン、禁止事項、コーディング規約への準拠をチェック。

**適用条件**: 全PRで適用（Tier 1必須）。特にCLAUDE.mdが存在するプロジェクトでは必須。

**ファイル**: `project-standards/P01-ai-agent-instructions.md`

---

## P02: 既存パターンとの整合性

**チェック内容**: 新規コードがコードベース内の既存パターン（命名規則、関数シグネチャ、ディレクトリ構造、データフロー、エラーハンドリング）と一致しているか検証。

**適用条件**: リファクタリング、新機能追加で推奨（Tier 2）。小規模変更では不要。

**ファイル**: `project-standards/P02-pattern-alignment.md`

---

## C01: バグ検出

**チェック内容**: 論理エラー、型エラー、nullポインタ、配列範囲外、計算エラー、競合状態、リソースリーク、無限ループ、未定義動作を検出。

**適用条件**: 全PRで適用（Tier 1必須）。

**ファイル**: `correctness/C01-bug-detection.md`

---

## C02: 機能要件の適合性

**チェック内容**: 実装が機能要件を正しく満たしているか検証。仕様との差異、エッジケース処理漏れ、不完全な実装、想定外の動作を検出。

**適用条件**: 新機能追加、バグ修正で必須（Tier 1）。リファクタリング、ドキュメント変更では不要。

**ファイル**: `correctness/C02-functional-compliance.md`

---

## C03: エッジケースとバウンダリー条件

**チェック内容**: 境界値（0, 1, -1, MAX, MIN）、空入力、null/undefined、型変換エラー、特殊文字、並行実行、リソース枯渇時の動作を検証。

**適用条件**: 新機能追加、API変更、外部入力処理で推奨（Tier 2）。ドキュメント変更では不要。

**ファイル**: `correctness/C03-edge-cases.md`

---

## C04: サイレントフェイラー

**チェック内容**: エラーを隠蔽する空catch、無視されるエラーコード、未チェックの戻り値、ログのみで処理継続、デフォルト値へのフォールバックを検出。

**適用条件**: 全PRで必須（Tier 1）。特にエラーハンドリング変更では厳密にチェック。

**ファイル**: `correctness/C04-silent-failures.md`

---

## C05: 例外安全性

**チェック内容**: 例外発生時のリソース解放、トランザクション整合性、不変条件の維持、再入可能性、部分的失敗への対応を検証。

**適用条件**: データベース操作、トランザクション処理、リソース管理で推奨（Tier 2）。

**ファイル**: `correctness/C05-exception-safety.md`

---

## S01: セキュリティ脆弱性（基本）

**チェック内容**: SQLインジェクション、XSS、認証バイパス、CSRF、パストラバーサル、コマンドインジェクション、暗号化不備、認証情報漏洩、SSRF、XXEを検出。

**適用条件**: 全PRで必須（Tier 1）。特に外部入力処理、認証・認可、データベース操作で厳密にチェック。

**ファイル**: `security-basic/S01-basic-vulnerabilities.md`

---

## S02: 一般的な脆弱性パターン

**チェック内容**: OWASP Top 10、CWE Top 25、認証・認可の欠陥、暗号化の問題、設定ミス、既知の脆弱性パターンを検出。

**適用条件**: セキュリティ修正、認証・認可変更で推奨（Tier 2）。

**ファイル**: `security-basic/S02-common-patterns.md`

---

## S03: False Positiveフィルタリング

**チェック内容**: 検出された脆弱性が実際に悪用可能かを検証。意図的な設計、既知の制限、軽減策の存在を確認し、False Positiveを除外。

**適用条件**: セキュリティ問題検出時に必須（Tier 1）。誤検知を防ぐための後処理。

**ファイル**: `security-basic/S03-false-positive-filter.md`

---

## S04: 先例ベースの評価

**チェック内容**: 過去の同様パターンと比較して、既知の脆弱性の再発、過去の修正の巻き戻し、セキュリティ改善の退行を検出。

**適用条件**: セキュリティ関連コード変更で推奨（Tier 2）。

**ファイル**: `security-basic/S04-precedent-based.md`

---

## S05: アダプティブレビュー深度

**チェック内容**: リスクレベル（HIGH/MEDIUM/LOW）に応じてレビュー深度を動的調整。HIGHは詳細分析、MEDIUMは標準チェック、LOWは高速確認。

**適用条件**: 全セキュリティレビューで推奨（Tier 2）。効率的なレビュー時間配分のために使用。

**ファイル**: `security-advanced/S05-adaptive-depth.md`

---

## S06: 攻撃者モデリング

**チェック内容**: HIGH RISKの脆弱性に対して攻撃者モデル（WHO/WHAT/WHERE）を定義。悪用可能性（EASY/MEDIUM/HARD）を評価し、具体的な攻撃シナリオを構築。

**適用条件**: HIGH RISKのセキュリティ問題で推奨（Tier 2）。MEDIUM/LOWではオーバーヘッドが大きい。

**ファイル**: `security-advanced/S06-attacker-modeling.md`

---

## S07: セキュリティリグレッション

**チェック内容**: Git履歴から過去のセキュリティコミット（"security", "CVE", "fix"）を特定し、削除されたセキュリティコードの再導入を検出。

**適用条件**: セキュリティ関連コード変更、過去にCVE修正があるファイルの変更で推奨（Tier 2）。

**ファイル**: `security-advanced/S07-security-regression.md`

---

## S08: ブラストラジアス（影響範囲）分析

**チェック内容**: 変更された関数の呼び出し元数を定量評価（1-5: LOW, 6-20: MEDIUM, 21-50: HIGH, 50+: CRITICAL）し、リスクレベルと組み合わせて優先度を決定。

**適用条件**: 共通関数・ユーティリティ変更、ライブラリコード変更で推奨（Tier 2）。

**ファイル**: `security-advanced/S08-blast-radius.md`

---

## S09: ベースラインコンテキスト構築

**チェック内容**: システム全体の不変条件、信頼境界、検証パターンを文書化。個別レビュー時に「既存の安全パターンからの逸脱」を検出する基準を構築。

**適用条件**: 初回レビュー、大規模セキュリティレビュー、プロジェクト全体のリファクタリング前で使用（Tier 3）。

**ファイル**: `security-advanced/S09-baseline-context.md`

---

## S10: レッドフラグエスカレーション

**チェック内容**: セキュリティコミットからのコード削除、アクセス制御修飾子削除、検証削除、外部呼び出し追加（検証なし）、高ブラストラジアス+HIGH RISK、暗号化弱体化、認証情報ハードコードを即座検出。

**適用条件**: セキュリティ関連コード変更、認証・認可変更で推奨（Tier 2）。レッドフラグ検出時は他のチェックをスキップして即座エスカレーション。

**ファイル**: `security-advanced/S10-red-flag-escalation.md`

---

## T01: テストカバレッジ

**チェック内容**: ユニットテスト、統合テスト、E2Eテストの有無と適切性を検証。新規コードに対するテストカバレッジを評価。

**適用条件**: 全PRで必須（Tier 1）。特に新機能追加、バグ修正では厳密にチェック。

**ファイル**: `testing/T01-test-coverage.md`

---

## T02: テストの質

**チェック内容**: テストの明確性、独立性、決定論性、保守性を評価。壊れやすいテスト、不明瞭なアサーション、過剰なモックを検出。

**適用条件**: テスト追加・変更で推奨（Tier 2）。

**ファイル**: `testing/T02-test-quality.md`

---

## T03: エラーハンドリング品質

**チェック内容**: エラーハンドリングの完全性、適切なエラーメッセージ、リソース解放、リトライロジック、ユーザーへの通知を検証。

**適用条件**: エラーハンドリング変更で必須（Tier 1）。

**ファイル**: `testing/T03-error-handling-quality.md`

---

## T04: リグレッションテスト

**チェック内容**: バグ修正に対して、修正を検証するテスト、再発防止のテストが追加されているか確認。

**適用条件**: バグ修正で推奨（Tier 2）。

**ファイル**: `testing/T04-regression-tests.md`

---

## T05: E2Eテスト計画

**チェック内容**: エンドツーエンドのテストシナリオが適切に設計されているか評価。ユーザーフロー全体のカバレッジを検証。

**適用条件**: 新機能追加、大規模変更で使用（Tier 3）。

**ファイル**: `testing/T05-e2e-test-plan.md`

---

## Q01: 読みやすさ

**チェック内容**: 変数名の明確性、関数の長さ、ネストの深さ、コメントの適切性、一貫性を評価。

**適用条件**: 全PRで必須（Tier 1）。

**ファイル**: `quality/Q01-readability.md`

---

## Q02: 複雑性

**チェック内容**: 循環的複雑度、ネストの深さ、関数の行数、認知的負荷を評価。過度に複雑なコードを検出。

**適用条件**: リファクタリング、大規模変更で推奨（Tier 2）。

**ファイル**: `quality/Q02-complexity.md`

---

## Q03: コード臭

**チェック内容**: 長いメソッド、大きいクラス、重複コード、過剰なパラメータ、機能の横恋慕、データクラスなどのコード臭を検出。

**適用条件**: リファクタリング、コード品質改善で推奨（Tier 2）。

**ファイル**: `quality/Q03-code-smells.md`

---

## Q04: アンチパターン

**チェック内容**: God Object、Spaghetti Code、Magic Numbers、Copy-Paste Programming、Golden Hammer、Premature Optimizationなどのアンチパターンを検出。

**適用条件**: コード品質改善、リファクタリングで推奨（Tier 2）。

**ファイル**: `quality/Q04-antipatterns.md`

---

## Q05: YAGNIチェック

**チェック内容**: 「今必要ない」機能の実装、過度な一般化、未使用の抽象化、投機的な設計、過剰な設定可能性を検出。

**適用条件**: 新機能追加、リファクタリングで推奨（Tier 2）。過剰実装を防ぐために使用。

**ファイル**: `quality/Q05-yagni-check.md`

---

## D01: 型設計とカプセル化

**チェック内容**: 型の適切性、カプセル化の実施、不変性の保証、インターフェース設計の妥当性を評価。

**適用条件**: 新規型定義、API設計で推奨（Tier 2）。

**ファイル**: `design/D01-type-design.md`

---

## D02: アーキテクチャパターン準拠

**チェック内容**: MVC、Layered Architecture、Clean Architecture、Microservicesなどの既存アーキテクチャパターンへの準拠を検証。

**適用条件**: 新機能追加、リファクタリング、アーキテクチャ変更で推奨（Tier 2）。

**ファイル**: `design/D02-architecture-patterns.md`

---

## D03: API設計

**チェック内容**: RESTful設計原則、一貫性のあるエンドポイント命名、適切なHTTPメソッド、エラーレスポンス、バージョニング戦略を評価。

**適用条件**: API追加・変更で使用（Tier 3）。

**ファイル**: `design/D03-api-design.md`

---

## D04: 依存関係管理

**チェック内容**: 循環依存、不適切な依存方向、疎結合の欠如、依存性注入の不足を検出。

**適用条件**: 新規モジュール追加、依存関係変更で推奨（Tier 2）。

**ファイル**: `design/D04-dependency-management.md`

---

## D05: データフロー設計

**チェック内容**: データの流れの明確性、データ変換の適切性、状態管理の妥当性、データの一貫性を評価。

**適用条件**: データ処理ロジック変更、状態管理変更で使用（Tier 3）。

**ファイル**: `design/D05-data-flow.md`

---

## D06: 修正の検証（Fix Review）

**チェック内容**: バグ修正が根本原因に対処しているか、修正が他の箇所に影響しないか、適切なテストが追加されているかを検証。

**適用条件**: バグ修正で使用（Tier 3）。修正の妥当性を確認するために使用。

**ファイル**: `design/D06-fix-review.md`

---

## DOC01: コメント品質と精度

**チェック内容**: コメントの正確性、必要性、明確性を評価。コードと矛盾するコメント、不要なコメント、不明瞭なコメントを検出。

**適用条件**: ドキュメント変更、複雑なロジック追加で推奨（Tier 2）。

**ファイル**: `documentation/DOC01-comment-quality.md`

---

## DOC02: ドキュメント整合性

**チェック内容**: コードとドキュメント（README、API仕様、設計書）の整合性を検証。ドキュメントの更新漏れを検出。

**適用条件**: API変更、機能追加でドキュメント更新が必要な場合に使用（Tier 3）。

**ファイル**: `documentation/DOC02-documentation-consistency.md`

---

## PERF01: パフォーマンス

**チェック内容**: アルゴリズムの効率性、不要な計算、メモリ使用量、I/O最適化、キャッシュ戦略を評価。

**適用条件**: パフォーマンスクリティカルなコード変更で使用（Tier 3）。

**ファイル**: `performance/PERF01-performance.md`

---

## PERF02: アクセシビリティ

**チェック内容**: WCAG準拠、スクリーンリーダー対応、キーボードナビゲーション、色覚多様性対応、フォーカス管理を検証。

**適用条件**: UI/スタイル変更で使用（Tier 3）。

**ファイル**: `performance/PERF02-accessibility.md`

---

## PERF03: リソース管理

**チェック内容**: メモリリーク、ファイルハンドル・接続の適切なクローズ、リソースプールの管理、タイムアウト設定を検証。

**適用条件**: データベース操作、ファイル操作、ネットワーク通信で推奨（Tier 2）。

**ファイル**: `performance/PERF03-resource-management.md`

---

## CTX01: Git履歴分析

**チェック内容**: 変更頻度の高いファイル、過去のバグ修正パターン、コミットメッセージからの意図理解、リファクタリング履歴を分析。

**適用条件**: 同じファイルでバグが頻発する場合、大規模変更で推奨（Tier 2）。

**ファイル**: `context/CTX01-git-history.md`

---

## CTX02: コードベース理解

**チェック内容**: プロジェクト全体の構造、主要モジュールの役割、データフロー、外部依存関係、設計意図を理解。

**適用条件**: 初回レビュー、大規模リファクタリング、新しいチームメンバーのオンボーディングで推奨（Tier 2）。

**ファイル**: `context/CTX02-codebase-understanding.md`

---

## 優先度分類

**Tier 1（必須・7観点）**: P01, C01, C02, C04, S01, S03, T01, T03, Q01
**Tier 2（推奨・15観点）**: P02, C03, C05, S02, S04, S05, S06, S07, S08, S10, T02, T04, Q02, Q03, Q04, Q05, D01, D02, D04, DOC01, PERF03, CTX01, CTX02
**Tier 3（オプション・15観点）**: S09, T05, D03, D05, D06, DOC02, PERF01, PERF02

---

**最終更新**: 2026-02-11
